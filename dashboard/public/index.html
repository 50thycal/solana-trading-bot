<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Pump.fun Trading Bot - Dashboard</title>
  <link rel="stylesheet" href="/styles.css">
</head>
<body>
  <div class="container">
    <!-- Navigation -->
    <nav id="nav-bar" class="nav-bar"></nav>

    <!-- Bot Status Header -->
    <section class="overview-header">
      <div class="overview-header-left">
        <div class="overview-title">
          <h1>Dashboard</h1>
          <span id="bot-mode" class="mode-badge">--</span>
          <span id="bot-status" class="status-value">--</span>
        </div>
        <div class="overview-meta">
          <span id="bot-version">--</span>
          <span class="separator">|</span>
          <span>Uptime: <strong id="uptime">--</strong></span>
        </div>
      </div>
      <div class="overview-header-right">
        <button class="btn btn-secondary btn-small" id="reset-stats-btn">Reset Stats</button>
      </div>
    </section>
    <!-- Toast notification -->
    <div id="dashboard-toast" class="copy-toast"></div>

    <!-- Key Metrics Cards -->
    <section class="overview-cards">
      <div class="card card-highlight">
        <div class="card-label">Wallet Balance</div>
        <div class="card-value" id="wallet-balance">-- SOL</div>
      </div>
      <div class="card">
        <div class="card-label">Realized P&L</div>
        <div class="card-value" id="realized-pnl">--</div>
      </div>
      <div class="card">
        <div class="card-label">Unrealized P&L</div>
        <div class="card-value" id="unrealized-pnl">--</div>
      </div>
      <div class="card card-accent">
        <div class="card-label">Total P&L</div>
        <div class="card-value big" id="total-pnl">--</div>
      </div>
      <div class="card">
        <div class="card-label">Open Positions</div>
        <div class="card-value" id="open-positions">0</div>
      </div>
      <div class="card">
        <div class="card-label">Exposure</div>
        <div class="card-value" id="current-exposure" style="font-size:1rem">--</div>
      </div>
    </section>

    <!-- Main Grid -->
    <div class="home-grid">
      <!-- Left Column -->
      <div class="home-left">
        <!-- Trading Stats -->
        <section class="panel">
          <div class="panel-header">
            <h2>Trading Stats</h2>
          </div>
          <div class="stat-grid">
            <div class="stat-item">
              <div class="stat-label">Total Buys</div>
              <div class="stat-value" id="total-buys">0</div>
            </div>
            <div class="stat-item">
              <div class="stat-label">Total Sells</div>
              <div class="stat-value" id="total-sells">0</div>
            </div>
            <div class="stat-item">
              <div class="stat-label">Win Rate</div>
              <div class="stat-value" id="win-rate">--</div>
            </div>
          </div>
        </section>

        <!-- Pipeline Overview -->
        <section class="panel">
          <div class="panel-header">
            <h2>Pipeline Overview</h2>
          </div>
          <div class="stat-grid">
            <div class="stat-item">
              <div class="stat-label">Tokens Detected</div>
              <div class="stat-value" id="pipeline-detected">0</div>
            </div>
            <div class="stat-item">
              <div class="stat-label">Tokens Bought</div>
              <div class="stat-value positive" id="pipeline-bought">0</div>
            </div>
            <div class="stat-item">
              <div class="stat-label">Buy Rate</div>
              <div class="stat-value" id="pipeline-buy-rate">0%</div>
            </div>
          </div>
        </section>

        <!-- Paper P&L (shown in dry_run / ab modes) -->
        <section class="panel paper-pnl-card" id="paper-pnl-card" style="display: none;">
          <div class="panel-header">
            <h2>Paper P&L</h2>
            <span class="dry-run-badge">PAPER</span>
          </div>
          <div class="stat-grid">
            <div class="stat-item">
              <div class="stat-label">Realized Paper P&L</div>
              <div class="stat-value" id="paper-realized-pnl">--</div>
            </div>
            <div class="stat-item">
              <div class="stat-label">Active Trades</div>
              <div class="stat-value" id="paper-active-trades">0</div>
            </div>
            <div class="stat-item">
              <div class="stat-label">Closed Trades</div>
              <div class="stat-value" id="paper-closed-trades">0</div>
            </div>
          </div>
        </section>

        <!-- Current Mode Stats -->
        <section class="panel" id="mode-stats-panel" style="display: none;">
          <div class="panel-header">
            <h2 id="mode-stats-title">Mode Stats</h2>
          </div>
          <div id="mode-stats-content" class="mode-stats-content">
          </div>
        </section>
      </div>

      <!-- Right Column -->
      <div class="home-right">
        <!-- Infrastructure Costs -->
        <section class="panel infra-panel">
          <div class="panel-header">
            <h2>Infrastructure Costs</h2>
            <span class="panel-subtitle">Goal: Profit > Costs</span>
          </div>
          <div class="infra-summary">
            <div class="infra-summary-row">
              <span>Monthly Cost</span>
              <span class="infra-highlight" id="monthly-infra-cost">--</span>
            </div>
            <div class="infra-summary-row">
              <span>Total Spent</span>
              <span class="negative" id="total-infra-spent">--</span>
            </div>
            <div class="infra-summary-row">
              <span>Running For</span>
              <span id="infra-days">--</span>
            </div>
          </div>
          <div id="infra-breakdown" class="infra-breakdown">
          </div>
          <div id="cost-vs-pnl" class="cost-vs-pnl">
          </div>
        </section>

        <!-- Training Runs -->
        <section class="panel">
          <div class="panel-header">
            <h2>Training Runs</h2>
          </div>
          <div class="stat-grid">
            <div class="stat-item">
              <div class="stat-label">A/B Sessions</div>
              <div class="stat-value" id="ab-sessions">0</div>
            </div>
            <div class="stat-item">
              <div class="stat-label">Last Smoke Test</div>
              <div class="stat-value" id="smoke-test-status">None</div>
            </div>
          </div>
        </section>

        <!-- Run History -->
        <section class="panel">
          <div class="panel-header">
            <h2>Run History</h2>
          </div>
          <div id="run-history-list" class="run-history-list">
            <div class="empty-state">No runs yet</div>
          </div>
        </section>
      </div>
    </div>
  </div>

  <script src="/nav.js"></script>
  <script src="/home.js"></script>
</body>
</html>
