# ===============================================================================
# SOLANA SNIPER BOT CONFIGURATION
# ===============================================================================
# Copy this file to .env and fill in your values.
# Lines starting with # are comments and will be ignored.
# ===============================================================================

# ===============================================================================
# CORE CONFIGURATION (REQUIRED)
# ===============================================================================

# Your wallet's private key in base58 format
# IMPORTANT: Keep this secure and never commit to version control
PRIVATE_KEY=

# RPC Configuration (Helius recommended)
# Get your API key at: https://helius.dev
RPC_ENDPOINT=https://mainnet.helius-rpc.com/?api-key=YOUR_HELIUS_API_KEY
RPC_WEBSOCKET_ENDPOINT=wss://mainnet.helius-rpc.com/?api-key=YOUR_HELIUS_API_KEY

# Optional: Backup RPC endpoints (comma-separated) for failover
# These will be used if the primary endpoint fails
RPC_BACKUP_ENDPOINTS=

# Solana commitment level: processed | confirmed | finalized
# "confirmed" is recommended for balance of speed and reliability
COMMITMENT_LEVEL=confirmed

# ===============================================================================
# MODE CONFIGURATION
# ===============================================================================

# Dry run mode: true = log trades without executing, false = live trading
# IMPORTANT: Start with true to test your configuration safely
DRY_RUN=true

# Log verbosity: trace | debug | info | warn | error
LOG_LEVEL=info

# Bot run control: true = active trading, false = standby mode (no RPC usage)
# When false, the bot starts but does NOT connect to Solana or consume RPC credits.
# The health/dashboard server stays alive. Restart with RUN_BOT=true to resume.
# Default: true
RUN_BOT=true

# ===============================================================================
# TRADING PARAMETERS
# ===============================================================================

# Token to use as quote currency (what you're spending)
# Options: WSOL, USDC, or a full token mint address
QUOTE_MINT=WSOL

# Amount to spend per trade (in quote token units)
# Example: 0.01 = 0.01 SOL per trade if QUOTE_MINT=WSOL
QUOTE_AMOUNT=0.01

# Slippage tolerance (percentage)
# Higher = more likely to execute but potentially worse price
BUY_SLIPPAGE=20
SELL_SLIPPAGE=30

# Delay before auto-buying after pool detection (milliseconds)
# 0 = buy immediately when filters pass
AUTO_BUY_DELAY=0

# Automatically sell when price targets are hit
AUTO_SELL=true

# Delay before checking for auto-sell (milliseconds)
AUTO_SELL_DELAY=0

# Process only one token at a time (prevents overexposure)
ONE_TOKEN_AT_A_TIME=true

# Take profit percentage (sell when price increases by this %)
TAKE_PROFIT=40

# Stop loss percentage (sell when price drops by this %)
STOP_LOSS=20

# Price monitoring settings (milliseconds)
PRICE_CHECK_INTERVAL=2000
PRICE_CHECK_DURATION=600000

# ===============================================================================
# TRANSACTION EXECUTION
# ===============================================================================

# Executor type: default | warp | jito
# "jito" is recommended for MEV protection
TRANSACTION_EXECUTOR=jito

# Default executor settings (used when TRANSACTION_EXECUTOR=default)
COMPUTE_UNIT_LIMIT=101337
COMPUTE_UNIT_PRICE=421197

# Warp/Jito executor fee in SOL
CUSTOM_FEE=0.006

# Retry settings
MAX_BUY_RETRIES=10
MAX_SELL_RETRIES=10

# ===============================================================================
# OPERATIONAL SETTINGS
# ===============================================================================

# Health check server port
HEALTH_PORT=8080

# Directory for persistent data (SQLite database, logs, etc.)
DATA_DIR=./data

# ===============================================================================
# RISK CONTROLS
# ===============================================================================

# Maximum total SOL deployed across all open positions
# Bot will block new trades if this limit would be exceeded
MAX_TOTAL_EXPOSURE_SOL=0.5

# Maximum trades per hour (rolling window)
# Prevents rapid trading during volatile conditions
MAX_TRADES_PER_HOUR=10

# Minimum SOL to keep in wallet as buffer for gas/recovery
# Bot will not trade if balance would drop below this amount
MIN_WALLET_BUFFER_SOL=0.05

# Maximum time to hold a position in milliseconds (0 = disabled)
# When enabled, positions will be sold after this duration regardless of P&L
# Default: 20000 (20 seconds). Set to 0 to disable.
MAX_HOLD_DURATION_MS=20000

# ===============================================================================
# EXECUTION QUALITY
# ===============================================================================

# Simulate transactions before sending (catches errors early, saves fees)
# Strongly recommended to keep enabled
SIMULATE_TRANSACTION=true

# Dynamic priority fee estimation (for default executor only)
# When enabled, queries recent network fees and uses configured percentile
USE_DYNAMIC_FEE=false

# Percentile of recent fees to use (0-100, higher = more aggressive)
PRIORITY_FEE_PERCENTILE=75

# Min/max bounds for dynamic priority fees (in microLamports)
MIN_PRIORITY_FEE=10000
MAX_PRIORITY_FEE=1000000

# Enable fallback executor (Jito -> Default RPC on failure)
# Only applies when TRANSACTION_EXECUTOR=jito
USE_FALLBACK_EXECUTOR=true

# Jito bundle confirmation settings (milliseconds)
# How long to wait for bundle to land before giving up
JITO_BUNDLE_TIMEOUT=60000

# How often to poll Jito for bundle status
JITO_BUNDLE_POLL_INTERVAL=2000

# ===============================================================================
# TOKEN AGE
# ===============================================================================

# Maximum age of a token (in seconds) to be considered "new"
# Tokens older than this will be rejected even if the pool is new
# This prevents buying into new pools for existing/old tokens
# Default: 300 (5 minutes)
# Recommended values:
#   - 120 (2 min): Conservative - only the freshest launches
#   - 300 (5 min): Standard - good balance of coverage and safety
#   - 600 (10 min): Aggressive - more launches, higher risk
MAX_TOKEN_AGE_SECONDS=300

# ===============================================================================
# PUMP.FUN FILTERS
# ===============================================================================
# Filter configuration specific to pump.fun bonding curve tokens.
# These filters evaluate the state of the bonding curve to determine
# if a token is worth buying. Designed for finding gems, not buying everything.

# Minimum SOL deposited in bonding curve to consider buying
# Tokens with less SOL haven't proven market interest yet
# Recommended: 5 (default) for some validation, 0 to disable
PUMPFUN_MIN_SOL_IN_CURVE=5

# Maximum SOL in bonding curve - avoids tokens near graduation (~400 SOL)
# Near-graduation tokens have less upside potential on the curve
# Recommended: 300 to catch early momentum, lower for earlier entries
PUMPFUN_MAX_SOL_IN_CURVE=300

# Enable/disable individual filters
# Min SOL filter: Requires minimum investment in curve (recommended)
PUMPFUN_ENABLE_MIN_SOL_FILTER=true

# Max SOL filter: Avoids near-graduation tokens
PUMPFUN_ENABLE_MAX_SOL_FILTER=true

# Minimum score required to buy (0-100)
# 0 = buy if all blocking filters pass (default)
# Higher values require better overall token quality score
# Future: Will be used when more scoring filters are added
PUMPFUN_MIN_SCORE_REQUIRED=0

# ===============================================================================
# MOMENTUM GATE (Pipeline Stage 4)
# ===============================================================================
# Validates buy momentum before allowing purchase.
# Uses retry-based polling to check if a token has sufficient buy transactions.
# Runs AFTER deep filters to minimize RPC usage (only tokens passing all
# previous gates are checked).

# Enable/disable the momentum gate
# When disabled, tokens pass through directly after deep filters
MOMENTUM_GATE_ENABLED=true

# Initial delay before first momentum check (milliseconds)
# Allows time for first transactions to be indexed by RPC
# Default: 100ms
MOMENTUM_INITIAL_DELAY_MS=100

# Minimum number of buy transactions required to pass
# Ensures multiple buyers have entered before we buy
# Default: 10
MOMENTUM_MIN_TOTAL_BUYS=10

# Wait time between recheck attempts (milliseconds)
# If threshold not met, wait this long before checking again
# Default: 100ms
MOMENTUM_RECHECK_INTERVAL_MS=100

# Maximum number of checks before rejecting
# Total max wait time = INITIAL_DELAY + (MAX_CHECKS * RECHECK_INTERVAL)
# Default: 5 (total window ~600ms with defaults)
MOMENTUM_MAX_CHECKS=5

# ===============================================================================
# TEST MODE
# ===============================================================================
# Set to "smoke" to run a single end-to-end test cycle and exit with pass/fail.
# The bot will: detect a token -> run pipeline -> buy -> verify -> sell -> verify -> report.
# Uses real mainnet transactions with QUOTE_AMOUNT.
# After the test completes, the process exits (Railway will show as "stopped").
# Leave empty for normal bot operation.
# Default: (empty = normal mode)
TEST_MODE=

# Timeout for smoke test mode in milliseconds
# How long the smoke test will wait for a token to pass the pipeline before giving up.
# Only applies when TEST_MODE=smoke
# Default: 300000 (5 minutes)
SMOKE_TEST_TIMEOUT_MS=300000

# ===============================================================================
# LOG FORMAT
# ===============================================================================
# Controls Railway log output format.
# "pretty" = full pino-pretty with colors and details (default)
# "compact" = terse single-line format, no colors, easier to copy into Claude
# Default: pretty
LOG_FORMAT=pretty

# ===============================================================================
# PRODUCTION TIME LIMIT
# ===============================================================================
# Optional: Maximum duration for a production run in minutes.
# When set to a positive value, the bot will run for this duration then
# gracefully shut down (saving P&L data, closing positions, etc.).
# When set to 0 or left empty, the bot runs indefinitely (default behavior).
#
# Minimum: 1 minute when enabled.
#
# Examples:
#   60   = 1 hour
#   240  = 4 hours
#   480  = 8 hours
#   1440 = 24 hours
#
# Default: 0 (disabled - runs indefinitely)
PRODUCTION_TIME_LIMIT_MINUTES=0
